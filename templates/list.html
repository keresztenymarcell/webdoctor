{% extends "base.html" %}

{% block title %}List of Questions{% endblock %}

{% block content %}
    <h1>List of Questions</h1>
    <br>
    <form action="/list" method="get">
    <p style="text-align:right;">
        <label style="font-size:18px">Sort by:</label>
            <select name="order_by">
                {% for option_index in range(header|length) %}
                    {% if header[option_index] == 'Submission Time' %}
                        <option value="{{ keys[option_index] }}" selected>{{ header[option_index] }}</option>
                    {% else %}
                        <option value="{{ keys[option_index] }}">{{ header[option_index] }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <select name="order_direction">
                <option value="desc" selected>Descending</option>
                <option value="asc">Ascending</option>
            </select>

            <button>Sort</button>
    </p>
    <table cellspacing="3" style="background-color:rgb(223, 17, 118);">
        <thead style="color:rgb(255, 255, 255)">
            <tr>
                <th id="id">{{ header[0] }}</th>
                <th id="submission_time">{{ header[1] }}</th>
                <th id="view_number">{{ header[2] }}</th>
                <th id="vote_number">{{ header[3] }}</th>
                <th> Vote </th>
                <th id="title">{{ header[4] }}</th>
                <th id="message">{{ header[5] }}</th>
                <th id="image">{{ header[6] }}</th>
            </tr>
        </thead>
        <tbody style="color:rgb(255, 255, 255)">
            {% for question_input in questions %}
                <tr>
                    <td><a href="/question/{{ question_input.id }}">{{ question_input.id }}</a></td>
                    <td>{{ question_input.submission_time }}</td>
                    <td>{{ question_input.view_number }}</td>
                    <td>{{ question_input.vote_number }}</td>
                    <td>
                        <button
                            formaction="/question/{{ question_input.id }}/vote_up"
                            class="vote-btn"
                            data-default-text="Vote This Dish Up!"
                            data-alt-text="Thanks for Voting">
                        <span class="icon"></span> <span class="text">Vote up</span>
                        </button>
                        <button
                            formaction="/question/{{ question_input.id }}/vote_down"
                            class="vote-btn"
                            data-default-text="Vote This Dish Down!"
                            data-alt-text="Thanks for Voting">
                        <span class="icon"></span> <span class="text">Vote down</span>
                        </button>
                    </td>
                    <td>{{ question_input.title }}</td>
                    <td>{{ question_input.message }}</td>
                    <td><img src="/pictures/question_pictures/{{ question_input.image }}" width="120" alt="some picture"></td>
                    <td><a href="/question/{{ question_input.id }}/edit">Edit</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <p style="color:rgb(223, 17, 118)"><a href="/add-question">Add questions</a></p>
{% endblock%}
