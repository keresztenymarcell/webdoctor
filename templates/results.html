{% extends "base.html" %}

{% block title %}Search Results{% endblock %}

{% block content %}
    <style>
        .up_arrow{transform: rotate(-90deg);}
        .down_arrow{transform: rotate(90deg);}
        h4{color: blue;}
    </style>

    <h1>Ásóka helps!</h1>
    <h3>Ask your question</h3>
    <br>

    <form action="/search" method="get">
        <input type="text" name="q">
        <input type="submit" value="Search">
    </form>
    <br>

    </p>
    </form>
    {% if questions|length != 0 %}
        {% for question in questions %}
            <table>
                <tr>
                    <td>
                    <p><a href="/question/{{ question.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                    <p style="text-align: center">{{ question.vote_number }}</p>
                    <p><a href="/question/{{ question.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                    </td>

                    <td style="width: 100%">
                        <h4> {{ question.title }}</h4>
                        <p>{{ question.message }}</p>
                        <a href="/question/{{ question.id }}/edit">
                            <button>EDIT</button></a>
                        <a href="/question/{{ question.id }}">
                            <button>ANSWER</button></a>
                        <p style="text-align: right">
                            Views: {{ question.view_number }}</p>
                    </td>
                    <td style="width: 100%">
                        {% if question.image  %}
                                <img src="/static/pictures/question_pictures/{{ question.image }}" width="200" alt="some picture">
                            {% endif %}
                    </td>
                </tr>

                {% if answers|length != 0 %}
                    {% for answer in answers %}
                        {% if question.id == answer.question_id %}
                            <tr>
                                <td>
                                <p><a href="/answer/{{ answer.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                                <p>{{ answer.vote_number }}</p>
                                <p><a href="/answer/{{ answer.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                                </td>
                                <td ><p><strong>{{ answer.message }}</strong></p></td>
                                <td style="text-align: center">
                                {% if answer.image  %}
                                    <img src="/static/pictures/answer_pictures/{{ answer.image }}" width="200" alt="some picture">
                                {% endif %}
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </table>
        {% endfor %}
    {% endif %}


    <table>
        <tbody>
            {% if answers|length != 0 %}
                {% for answer in answers %}
                    {% if questions|length != 0 %}
                        {% for question in questions %}
                            {% if question.id != answer.question_id %}
                                <tr>
                                    <td>
                                    <p><a href="/answer/{{ answer.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                                    <p>{{ answer.vote_number }}</p>
                                    <p><a href="/answer/{{ answer.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                                    </td>
                                    <td ><p><strong>{{ answer.message }}</strong></p></td>
                                    <td style="text-align: center">
                                    {% if answer.image  %}
                                        <img src="/static/pictures/answer_pictures/{{ answer.image }}" width="200" alt="some picture">
                                    {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        {% for answer in answers %}
                             <tr>
                                <td>
                                <p><a href="/answer/{{ answer.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                                <p>{{ answer.vote_number }}</p>
                                <p><a href="/answer/{{ answer.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                                </td>
                                <td ><p><strong>{{ answer.message }}</strong></p></td>
                                <td style="text-align: center">
                                {% if answer.image  %}
                                    <img src="/static/pictures/answer_pictures/{{ answer.image }}" width="200" alt="some picture">
                                {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            {% else %}
                <tr>
                    <td>
                        <p>No results found.</p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>

{% endblock%}
