{% extends "base.html" %}

{% block title %}Search Results{% endblock %}

{% block content %}

      <nav class="navbar navbar-expand-md navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
            <a class="navbar-brand" href="{{ url_for('main_page') }}"><button class="btn btn-outline-success"><i class="fa fa-home"></i></button></a>
            </div>
        <ul class="nav navbar-nav align-items-center">
          <li><form class="search" action="/search" method="get">
            <input type="search" name="q">
             <button class="btn btn-outline-success" type="submit"><i class="fa fa-search"></i></button>
            </form></li>
        </ul>
        </div>
    </nav>



    <h1>WebDoctor</h1>
    <h3>Search results</h3>
    <br>

    </p>
    </form>
    {% if get_flashed_messages() %}
        <div class="alert alert-danger d-flex align-items-center" role="alert">
        <div>
           {% for message in get_flashed_messages() %}
                {{ message }}
             {%  endfor %}
        </div>

    {% else %}
        <table>
            {% for question in found_questions %}
                <tr>
                    <td>
                    <p><a href="/question/{{ question.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                    <p style="text-align: center">{{ question.vote_number }}</p>
                    <p><a href="/question/{{ question.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                    </td>

                    <td style="width: 100%">
                        <h4> {{ question.title | safe }}</h4>
                    {% if tag_type in question.message %}
                        <p>{{ question.message | safe }}</p>
                    {% endif %}
                    <p style="text-align: right">
                        Views: {{ question.view_number }}</p>
                    </td>
                    <td style="width: 100%">
                        {% if question.image  %}
                                <img class="whysobig" src="/static/pictures/question_pictures/{{ question.image }}" width="200" alt="some picture">
                            {% endif %}
                    </td>
                </tr>

                {% for answer in found_answers %}
                    {% if answer.question_id == question.id %}
                        <tr>
                            <td>
                            <p><a href="/answer/{{ answer.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                            <p>{{ answer.vote_number }}</p>
                            <p><a href="/answer/{{ answer.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                            </td>
                            <td ><p class="tab"><strong>{{ answer.message | safe }}</strong></p></td>
                            <td style="text-align: center">
                            {% if answer.image %}
                                <img class="whysobig" src="/static/pictures/answer_pictures/{{ answer.image }}" width="200" alt="some picture">
                            {% endif %}
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endfor %}

            {% for answer in found_answers %}
                {% if answer.question_id not in q_ids %}
                    {% for question in questions %}
                        {% if answer.question_id == question.id %}
                            <tr>
                                <td>
                                <p><a href="/question/{{ question.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                                <p style="text-align: center">{{ question.vote_number }}</p>
                                <p><a href="/question/{{ question.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                                </td>

                                <td style="width: 100%">
                                    <h4> {{ question.title | safe }}</h4>

                                <p style="text-align: right">
                                    Views: {{ question.view_number }}</p>
                                </td>
                                <td style="width: 100%">
                                    {% if question.image  %}
                                            <img class="whysobig" src="/static/pictures/question_pictures/{{ question.image }}" width="200" alt="some picture">
                                        {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                <p><a href="/answer/{{ answer.id }}/vote_up"><img class="up_arrow" src="/static/icons/arrow.png" alt="up-vote" width="40" height="40"  ></a></p>
                                <p>{{ answer.vote_number }}</p>
                                <p><a href="/answer/{{ answer.id }}/vote_down"><img class="down_arrow" src="/static/icons/arrow.png" alt="down-vote" width="40" height="40"></a></p>
                                </td>
                                <td ><p class="tab"><strong>{{ answer.message | safe }}</strong></p></td>
                                <td style="text-align: center">
                                {% if answer.image %}
                                    <img class="whysobig" src="/static/pictures/answer_pictures/{{ answer.image }}" width="200" alt="some picture">
                                {% endif %}
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        </table>
    {% endif %}







{% endblock%}
